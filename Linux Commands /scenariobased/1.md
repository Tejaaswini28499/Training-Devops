A critical process is consuming 100% CPU, but top shows it’s stuck in uninterruptible sleep. How do you handle it?


Here’s a **brief explanation**:

When a process shows **100% CPU usage** in a monitoring tool like `top`, but its **state is `D` (uninterruptible sleep)**, it usually means:

* The process is **waiting for I/O** (disk, NFS, network storage, or hardware) and cannot be killed until the I/O completes.
* Even `kill -9` will **not work** while in `D` state.

**How to handle it:**

1. **Identify the process and the resource it’s waiting for**:

   ```bash
   ps -eo pid,stat,comm | grep D
   lsof -p <PID>      # see open files
   strace -p <PID>    # see system calls
   ```
2. **Check underlying I/O issues**:

   * Disk errors: `dmesg | tail`
   * Network storage issues (NFS, SAN)
   * Filesystem problems
3. **Fix the root cause**:

   * Resolve the stuck I/O (e.g., remount filesystem, fix hardware)
   * Once I/O completes, the process may return to normal and can be terminated if needed.
4. **As a last resort**:

   * Reboot the server if the process is critical and I/O cannot be recovered.

**Key point:** You **cannot kill a process in uninterruptible sleep** until the kernel finishes the I/O it’s waiting on.

If you want, I can also explain **why `top` shows 100% CPU even in `D` state**, which confuses many people. Do you want me to?
