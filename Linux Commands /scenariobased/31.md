Perfect 👏 — this is a **very common real-world & interview scenario** for Linux/DevOps engineers.

Let’s go step-by-step on how to **troubleshoot permissions** when a user can’t access a shared directory 👇

---

## 🧩 **1️⃣ Identify the directory and user**

Let’s say:

* The shared directory is `/shared`
* The user is `teja`

---

## 🔍 **2️⃣ Check current permissions**

Run:

```bash
ls -ld /shared
```

Example output:

```
drwxr-x---  3 root developers 4096 Oct 14 15:00 /shared
```

### Breakdown:

| Part         | Meaning         |
| ------------ | --------------- |
| `d`          | directory       |
| `rwxr-x---`  | permission bits |
| `root`       | owner           |
| `developers` | group           |

---

## 🧠 **3️⃣ Understand the permissions**

The 9 permission bits mean:

| Who    | Bits | Meaning              |
| ------ | ---- | -------------------- |
| Owner  | rwx  | read, write, execute |
| Group  | r-x  | read, execute        |
| Others | ---  | no access            |

---

## ⚙️ **4️⃣ Check user’s ownership & groups**

Run:

```bash
id teja
```

Example:

```
uid=1001(teja) gid=1001(teja) groups=1001(teja),1002(developers)
```

✅ Make sure the user is part of the directory’s group (`developers` in this example).

If not, add them:

```bash
sudo usermod -aG developers teja
```

Then ask the user to **log out and log back in** to apply the group membership.

---

## 🧾 **5️⃣ Fix directory permissions if needed**

If user or group doesn’t have correct access:

* Give group members access:

  ```bash
  sudo chmod 770 /shared
  ```

  (`rwxrwx---` → owner & group full access)

* Or make it readable by everyone:

  ```bash
  sudo chmod 755 /shared
  ```

  (`rwxr-xr-x` → everyone can read/execute, only owner can write)

---

## 👑 **6️⃣ Fix ownership if needed**

If the directory is owned by the wrong user/group:

```bash
sudo chown root:developers /shared
```

---

## 📁 **7️⃣ Check sticky bit / special permissions (if shared among users)**

If multiple users share the directory:

```bash
sudo chmod 1777 /shared
```

That sets the **sticky bit** (`t`), meaning users can only delete *their own* files (used in `/tmp`).

---

## 🧰 **8️⃣ Check mount options or ACLs (if still not working)**

* If it’s an **NFS share**, verify mount options:

  ```bash
  mount | grep shared
  ```

* If using **ACLs**:

  ```bash
  getfacl /shared
  ```

  Add ACL for user if missing:

  ```bash
  sudo setfacl -m u:teja:rwx /shared
  ```

---

## ✅ **9️⃣ Quick Summary Table**

| Step | Check / Command  | Purpose                               |
| ---- | ---------------- | ------------------------------------- |
| 1    | `ls -ld /shared` | Check owner, group, and permissions   |
| 2    | `id username`    | Verify user’s groups                  |
| 3    | `chmod`          | Fix permission bits                   |
| 4    | `chown`          | Fix owner/group                       |
| 5    | `usermod -aG`    | Add user to group                     |
| 6    | `setfacl`        | Add fine-grained permission if needed |
| 7    | `mount`          | Check share type (NFS, etc.)          |

---

Would you like me to show a **real example** of fixing a shared folder step-by-step (like `/shared` for multiple users)?
